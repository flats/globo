<div class="HAMBONE-CITY">


</div>

{{#leaflet-map lat=lat lng=lng zoom=zoom maxBoundsViscosity=0.0 maxBounds=bounds doubleClickZoom=false minZoom=3 onDblclick=(action "addPoint")}}

  {{tile-layer url="http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png" noWrap=true }}
  {{#each model.pins as |pin|}}

    {{#if pastPins}}
    {{#unless pin.visited}}
      {{marker-wrapper pin=pin pinSmack=(action 'pinSmack' pin) editPin='editPin' savePin='savePin' deletePin='deletePin'}}
    {{/unless}}
    {{/if}}

    {{#if futurePins}}
    {{#if pin.visited}}
      {{marker-wrapper pin=pin pinSmack=(action 'pinSmack' pin) editPin='editPin' savePin='savePin' deletePin='deletePin'}}
    {{/if}}
    {{/if}}


  {{/each}}
  
  <!-- map trips -->
  {{#each model.trips as |trip|}}
    {{polyline-layer locations=trip.pinPoints}}
  {{/each}}


{{/leaflet-map}}

<div id="add-pin-wrapper">
  <div id="add-pin" class="leaflet-bar {{if addState "active"}}">
    <a href="#" {{action 'addPinMode'}}>Add a pin</a>
  </div>
</div>

<div id="add-trip-wrapper">
  <div id="add-trip" class="leaflet-bar {{if addTripState "active"}}">
    <a href="#" {{action 'addTripMode'}}>Add a Trip</a>
  </div>
</div>

<div id="search-location-wrapper">
  <div id="search-location" class="leaflet-bar {{if addState "active"}}">
    <form id="search-location-form" {{action "findLocation" on="submit"}}>
      {{input id="search-location-input" value=searchQuery placeholder="Search for a place..."}}
    </form>
  </div>
</div>


<div id="future-wrapper" class="filter-button-wrapper">
  <div id="filter-button-future" class="leaflet-bar {{if filterFuture "active"}}">
    <a href="#" {{action 'filterFuture'}}>Future</a>
  </div>
</div>

<div id="past-wrapper" class="filter-button-wrapper">
  <div id="filter-button-past" class="leaflet-bar {{if filterPast "active"}}">
    <a href="#" {{action 'filterPast'}}>Past</a>
  </div>
</div>


{{outlet}}
