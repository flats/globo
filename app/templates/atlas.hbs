{{#leaflet-map lat=lat lng=lng zoom=zoom maxBoundsViscosity=0.0 maxBounds=bounds doubleClickZoom=false minZoom=3 onDblclick=(action "addPoint")}}

  {{tile-layer url="http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png" noWrap=true }}
  {{#each model.pins as |pin|}}
    {{#marker-layer lat=pin.lat lng=pin.long}}
      {{add-pin pin=pin editPin='editPin' savePin='savePin' deletePin='deletePin'}}
    {{/marker-layer}}
  {{/each}}
{{/leaflet-map}}

<div id="add-pin-wrapper">
  <div id="add-pin" class="leaflet-bar {{if addState "active"}}">
    <a href="#" {{action 'addPinMode'}}>Add a pin</a>
  </div>
</div>

<div id="search-location-wrapper">
  <div id="search-location" class="leaflet-bar {{if addState "active"}}">
    <form id="search-location-form" {{action "findLocation" on="submit"}}>
      {{input id="search-location-input" value=searchQuery placeholder="Search for a place..."}}
    </form>
  </div>
</div>

{{outlet}}
